var http = require('http'),
		connect = require('connect'),
		serveStatic = require('serve-static'),
		
		//Server PORT
		SERV_PORT = 8080,
		//Server ADDRESS
		SERV_ADDR = '127.0.0.1',
		
		//Server instance
		server,
		app,
		
		//TODO
		//Function to start server
//		serv = function(port) {
//			//Starting server
//			server = connect(SERV_ADDR).use(connect.static('app')).listen(port);

//			//On server error:
//			//If port used - try to start server on another port
//			//Else show error
//			server.on('error', function (err) {
//				if(err.code === 'EADDRINUSE') {
//					err.msg = 'Server port('+SERV_PORT+') used by another process. Switching to port: ' + --SERV_PORT;
//					serv(SERV_PORT);
//				} else {
//					err.msg = 'Server error' + JSON.stringify(err);
//				}
//				console.log(err.msg);
//			});
//			
//			console.log('Server running at http://' + SERV_ADDR + ':' + SERV_PORT + '/');
//		};
		//Init server on PORT
		//serv(SERV_PORT);
		//TODO

		app = connect()  
			.use(serveStatic('app'))
			.use('/js/', serveStatic('node_modules/requirejs/'))
			.use('/js/', serveStatic('node_modules/jquery/dist/'))
			.use('/js/', serveStatic('node_modules/backbone/node_modules/underscore/'))
			.use('/js/', serveStatic('node_modules/backbone/'))
			.use('/js/', serveStatic('node_modules/backbone.localstorage/'))
			.use('/css/', serveStatic('node_modules/bootstrap/dist/css'));

		http.createServer(app).listen(8080, function() {  
			console.log('Running on http://localhost:8080');
		});
